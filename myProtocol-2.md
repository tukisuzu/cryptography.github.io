# 手順

## 概要

2人のユーザー間で通信を行う。  
間にサーバーを挟む。 WebSocket を用いる。  
それぞれのユーザーは自身を証明・識別するための、何らかの情報(識別子)を持っている。通信を行うユーザー同士は、事前にその情報を交換しておく必要がある。  
電子署名を用いて、互いに識別子が本人のものであることを確認する。  
通信毎に共有鍵を生成し、その共有鍵を用いて通信を行う。  

## 接続案

それぞれのユーザーは公開鍵(keyP1-pub)と秘密鍵(keyP1-pri)を生成する。その公開鍵を識別子として長期利用する。  
通信を行うユーザー同士は、公開鍵を交換しておく。  
電子署名を用いて、互いに公開鍵(keyP1)が本人のものであることを確認する。  
KeyP1 を用いた公開鍵暗号方式を用いて、今回の通信に用いる共有鍵を交換する。短期利用する公開鍵(keyP2)を生成し、それを用いて共有鍵を交換する。  

互いに非対称鍵のペアを生成し、公開鍵を交換しておく。これは認証にのみ用いられる。  
ECDH を用いて今回限りの対称鍵を生成する。  

認証付き一時公開鍵を送る。  
認証付き一時公開鍵を送る。共有鍵の確認を送る。  
共有鍵の確認を送る。  

## 参考

+ <https://qiita.com/angel_p_57/items/897bf94160be8d637585>  
+ <https://qiita.com/angel_p_57/items/446130934b425d90f89d>  
+ <https://qiita.com/developer-kikikaikai/items/055a344c847379b471f7>  
+ <https://en.wikipedia.org/wiki/Forward_secrecy>  
+ <https://qiita.com/shun_takagi/items/eb46e0c1f0bb512fa04d>  
